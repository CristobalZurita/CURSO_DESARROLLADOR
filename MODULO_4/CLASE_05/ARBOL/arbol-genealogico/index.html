<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ra√≠ces ‚Äî Mi √Årbol Geneal√≥gico</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Crimson+Pro:wght@300;400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/main.css" />
</head>
<body>

  <header class="main-navbar">
    <div class="main-navbar__inner">
      <div class="main-navbar__brand">
        <span class="main-navbar__icon">üå≥</span>
        <div class="main-navbar__brand-text">
          <span class="main-navbar__brand-title">Ra√≠ces</span>
          <span class="main-navbar__brand-subtitle">Acceso y sesi√≥n</span>
        </div>
      </div>

      <div class="main-navbar__auth">
        <div class="main-navbar__fields">
          <div class="form-group main-navbar__field">
            <label for="auth-username" class="main-navbar__label">Usuario</label>
            <input type="text" id="auth-username" class="form-control main-navbar__input" placeholder="ej: camila.r" autocomplete="username" />
          </div>
          <div class="form-group main-navbar__field">
            <label for="auth-password" class="main-navbar__label">Contrase√±a</label>
            <input type="password" id="auth-password" class="form-control main-navbar__input" placeholder="m√≠nimo 4 caracteres" autocomplete="current-password" />
          </div>
        </div>

        <div class="main-navbar__actions">
          <button class="btn btn--secondary btn--sm main-navbar__button" id="btn-auth-login" type="button">Entrar / Crear cuenta</button>
          <button class="btn btn--ghost btn--sm main-navbar__button" id="btn-auth-logout" type="button" hidden>Cerrar sesi√≥n</button>
        </div>

        <div class="main-navbar__meta">
          <p class="main-navbar__status" id="auth-status">No hay sesi√≥n activa.</p>
          <p class="main-navbar__micro">
            Admin demo:
            <span class="main-navbar__credential">admin</span> /
            <span class="main-navbar__credential">admin123</span>
          </p>
        </div>
      </div>
    </div>
  </header>

  <!-- PANTALLA 1: BIENVENIDA / CALCULADOR -->
  <section id="screen-welcome" class="screen screen--active">
    <div class="welcome__bg">
      <div class="welcome__leaves"></div>
      <div class="welcome__roots"></div>
    </div>
    <div class="welcome__content">
      <div class="welcome__brand">
        <span class="welcome__icon">üå≥</span>
        <h1 class="welcome__title">Ra√≠ces</h1>
        <p class="welcome__subtitle">Tu historia familiar, viva y creciendo</p>
      </div>

      <!-- CALCULADOR PERSONAL (reto integrado) -->
      <div class="calculator-card" id="calculator-section">
        <div class="calculator-card__header">
          <span class="calculator-card__badge">Reto: El Calculador Personal</span>
          <h2 class="calculator-card__title">Cu√©ntame sobre ti</h2>
          <p class="calculator-card__lead">Necesito conocerte antes de construir tu √°rbol</p>
        </div>

        <div class="calculator-card__body">
          <div class="form-group">
            <label for="input-nombre" class="form-label">¬øC√≥mo te llamas?</label>
            <input type="text" id="input-nombre" class="form-control" placeholder="Tu nombre completo" autocomplete="off" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="input-edad" class="form-label">Tu edad</label>
              <input type="number" id="input-edad" class="form-control" placeholder="ej: 28" min="6" max="120" />
            </div>
            <div class="form-group">
              <label for="input-anio" class="form-label">A√±o actual</label>
              <input type="number" id="input-anio" class="form-control" value="2025" min="2000" max="2100" />
            </div>
          </div>

          <button class="btn btn--primary btn--full" id="btn-calcular">
            <span>Calcular y Crear mi √Årbol</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </button>
        </div>

        <!-- Resultado calculador -->
        <div class="calculator-result" id="calc-result" hidden>
          <div class="result-grid">
            <div class="result-item">
              <span class="result-label">A√±o de nacimiento</span>
              <span class="result-value" id="res-anio-nac">‚Äî</span>
            </div>
            <div class="result-item">
              <span class="result-label">¬øMayor de edad?</span>
              <span class="result-value" id="res-mayor">‚Äî</span>
            </div>
            <div class="result-item">
              <span class="result-label">¬øJoven adulto?</span>
              <span class="result-value" id="res-joven">‚Äî</span>
            </div>
          </div>
          <p class="result-message" id="res-mensaje"></p>
        </div>
      </div>
    </div>
  </section>

  <section class="admin-panel" id="admin-panel" hidden>
    <div class="admin-panel__card">
      <h3 class="admin-panel__title">Panel de Administraci√≥n</h3>
      <p class="admin-panel__lead">Usuarios registrados en el fake-backend local.</p>
      <div class="admin-panel__list" id="admin-users-list"></div>
    </div>
  </section>

  <div class="minor-warning-overlay" id="minor-warning-overlay" hidden>
    <div
      class="minor-warning-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="minor-warning-title"
      aria-describedby="minor-warning-text"
    >
      <p class="minor-warning-modal__eyebrow">‚ö†Ô∏è Aviso de seguridad</p>
      <h3 id="minor-warning-title" class="minor-warning-modal__title">Menor de 14 a√±os</h3>
      <p id="minor-warning-text" class="minor-warning-modal__text">
        Para continuar con la creaci√≥n del √°rbol, debes estar acompa√±ado por un adulto responsable.
      </p>
      <p class="minor-warning-modal__note">
        Esta medida protege tu informaci√≥n familiar y asegura un uso supervisado de la plataforma.
      </p>
      <div class="minor-warning-modal__actions">
        <button class="btn btn--ghost minor-warning-modal__button" id="btn-minor-cancel" type="button">Volver y revisar</button>
        <button class="btn btn--primary minor-warning-modal__button" id="btn-minor-continue" type="button">Continuar con adulto</button>
      </div>
    </div>
  </div>

  <!-- PANTALLA 2: √ÅRBOL GENEAL√ìGICO -->
  <section id="screen-tree" class="screen">
    <header class="tree-header">
      <div class="tree-header__left">
        <span class="tree-header__icon">üå≥</span>
        <div>
          <h1 class="tree-header__title">Ra√≠ces</h1>
          <p class="tree-header__user">√Årbol de <span id="header-nombre" class="tree-header__user-name"></span></p>
        </div>
      </div>
      <div class="tree-header__right">
        <span class="tree-header__info" id="header-info"></span>
        <button class="btn btn--ghost btn--sm" id="btn-reset">‚Üê Salir</button>
      </div>
    </header>

    <div class="tree-workspace">
      <!-- Leyenda de generaciones -->
      <aside class="tree-legend">
        <h3 class="tree-legend__title">Generaciones</h3>
        <ul class="tree-legend__list">
          <li class="tree-legend__item"><span class="gen-dot gen--bisabuelos"></span> Bisabuelos</li>
          <li class="tree-legend__item"><span class="gen-dot gen--abuelos"></span> Abuelos</li>
          <li class="tree-legend__item"><span class="gen-dot gen--padres"></span> Padres</li>
          <li class="tree-legend__item"><span class="gen-dot gen--yo"></span> T√∫</li>
          <li class="tree-legend__item"><span class="gen-dot gen--hijos"></span> Hijos</li>
          <li class="tree-legend__item"><span class="gen-dot gen--nietos"></span> Nietos</li>
          <li class="tree-legend__item"><span class="gen-dot gen--bisnietos"></span> Bisnietos</li>
        </ul>
        <div class="tree-stats">
          <p>Total parientes: <span id="stat-total" class="tree-stats__value">0</span></p>
        </div>
      </aside>

      <!-- Canvas del √°rbol -->
      <main class="tree-canvas" id="tree-canvas">
        <div class="tree-container" id="tree-container">
          <!-- Los nodos se generan con JS -->
        </div>
      </main>
    </div>

    <!-- Modal: A√±adir pariente -->
    <div class="modal-overlay" id="modal-overlay" hidden>
      <div class="modal" id="modal-add">
        <button class="modal__close" id="modal-close">‚úï</button>
        <div class="modal__header">
          <span class="modal__icon" id="modal-icon">üë§</span>
          <h3 id="modal-title" class="modal__title">A√±adir pariente</h3>
          <p id="modal-desc" class="modal__desc"></p>
        </div>
        <div class="modal__body">
          <div class="form-group">
            <label for="m-nombre" class="form-label">Nombre</label>
            <input type="text" id="m-nombre" class="form-control" placeholder="Nombre completo" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="m-edad" class="form-label">Edad</label>
              <input type="number" id="m-edad" class="form-control" placeholder="a√±os" min="0" max="120" />
            </div>
            <div class="form-group">
              <label class="form-label">Relaci√≥n</label>
              <input type="text" id="m-relacion" readonly class="form-control input--readonly" />
            </div>
          </div>

          <!-- Validaci√≥n calculador integrada -->
          <div class="calc-validation" id="calc-validation"></div>

          <button class="btn btn--primary btn--full" id="btn-confirmar-pariente">
            A√±adir al √°rbol üåø
          </button>
        </div>
      </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="toast"></div>
  </section>

  <script src="js/auth.js" defer></script>
  <script src="js/calculator.js" defer></script>
  <script src="js/tree.js" defer></script>
  <script src="js/app.js" defer></script>
</body>
</html>
