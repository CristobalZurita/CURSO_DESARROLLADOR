@use "sass:color";
@use "variables";

// ============================================
// ABSTRACTS / _mixins.scss
// ============================================

// Responsive
@mixin respond-to($bp) {
  @if $bp == sm    { @media (min-width: #{variables.$bp-sm})  { @content; } }
  @else if $bp == md { @media (min-width: #{variables.$bp-md}) { @content; } }
  @else if $bp == lg { @media (min-width: #{variables.$bp-lg}) { @content; } }
  @else if $bp == xl { @media (min-width: #{variables.$bp-xl}) { @content; } }
}

// Flex helpers
@mixin flex($dir: row, $justify: flex-start, $align: stretch, $gap: 0) {
  display: flex;
  flex-direction: $dir;
  justify-content: $justify;
  align-items: $align;
  @if $gap != 0 { gap: $gap; }
}

@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

// Card base orgánico
@mixin organic-card {
  background: variables.$color-surface;
  border: 1px solid variables.$color-border;
  border-radius: variables.$radius-lg;
  box-shadow: variables.$shadow-md;
  backdrop-filter: blur(8px);
}

// Nodo de árbol
@mixin tree-node-base($color) {
  background: linear-gradient(135deg, color.adjust($color, $lightness: 8%), $color);
  border: 2px solid color.adjust($color, $lightness: -10%);
  border-radius: variables.$radius-md;
  box-shadow: variables.$shadow-node;
  color: #fff;
  position: relative;
  transition: transform variables.$transition-base, box-shadow variables.$transition-base;

  &:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 12px 32px rgba(color.adjust($color, $lightness: -20%), 0.35);
  }
}

// Texto truncado
@mixin truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// Animación de aparición
@mixin fade-in-up($delay: 0s) {
  animation: fadeInUp 0.6s ease both;
  animation-delay: $delay;
}

// Línea conectora orgánica
@mixin connector-line {
  content: '';
  position: absolute;
  background: variables.$color-earth;
  opacity: 0.4;
}
